
@{
    ViewBag.Title = "Compras";
    ViewBag.SubTitle = "Todas";
    ViewBag.ControllerGeneral = "Compras";
    ViewBag.PrimaryColor = "pink";
    ViewBag.NavExtendedColor = "blue darken-1";
}

<nav class="breadcrumb-nav nav-extended @ViewBag.NavExtendedColor">
    @Html.Partial("_breadcrumbPartial")
</nav>
<div class="nueva-compra row">
    <div class="row">
        <div class="proveedor col l6">
            <div class="row white z-depth-1">
                <div class="opcionesProveedor col l12">
                    <p>
                        <strong>Datos del Proveedor</strong>
                        <a class="right tooltipped" data-position="bottomMio" data-delay="50" data-tooltip="Eliminar Proveedor" onclick="eliminarProveedor()"><i class="material-icons">clear</i></a>
                        <a class="right tooltipped" data-position="bottomMio" data-delay="50" data-tooltip="Buscar Proveedor" onclick="proveedores()"><i class="material-icons">search</i></a>
                        <a class="right tooltipped editar" data-position="bottomMio" data-delay="50" data-tooltip="Editar Proveedor" onclick="editarProveedor()"><i class="material-icons">edit</i></a>
                    </p>
                </div>
                <div class="divider-mio"></div>
                <div class="datosProveedor"></div>
                <div class="col l12 center" id="pre-Proveedor" style="padding-top: 10px; display: none;">
                    <div class="preloader-wrapper small active">
                        <div class="spinner-layer spinner-blue-only">
                            <div class="circle-clipper left">
                                <div class="circle"></div>
                            </div><div class="gap-patch">
                                <div class="circle"></div>
                            </div><div class="circle-clipper right">
                                <div class="circle"></div>
                            </div>
                        </div>
                    </div>
                    <p style="margin-top:0">Cargando datos del proveedor..</p>
                </div>
            </div>
        </div>
        <div class="general col l6">
            <div class="row white z-depth-1">
                <div class="opcionesGeneral col l12">
                    <p><strong>Datos Generales</strong></p>
                </div>
                <div class="divider-mio"></div>
                <div class="datosGenerales"></div>
                <div class="col l12 center" id="pre-General" style="padding-top: 10px; display: none;">
                    <div class="preloader-wrapper small active">
                        <div class="spinner-layer spinner-blue-only">
                            <div class="circle-clipper left">
                                <div class="circle"></div>
                            </div><div class="gap-patch">
                                <div class="circle"></div>
                            </div><div class="circle-clipper right">
                                <div class="circle"></div>
                            </div>
                        </div>
                    </div>
                    <p style="margin-top:0">Cargando datos de la compra..</p>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="articulosCompra col l9">
            <div class="row">
                <div class="head col l12 white z-depth-1">
                    <div class="opcionesArticulos col l12">
                        <p class="col l6">
                            <strong>Lista de Articulos a Comprar</strong>
                        </p>
                        <div class="acciones col l6">
                            <div>
                                <a class="right tooltipped" data-position="bottomMio" data-delay="50" data-tooltip="Seleccionar Producto" onclick="abrirArticulos(1)"><i class="material-icons">add_shopping_cart</i></a>
                                <a class="right tooltipped" data-position="bottomMio" data-delay="50" data-tooltip="Agregar Producto" onclick="$('#nuevoProducto').modal('open'); ultimo();"><i class="material-icons">add_box</i></a>
                                <a class="delete right tooltipped" data-position="bottomMio" data-delay="50" data-tooltip="Vaciar Orden" onclick="$('#eliminartodos').modal('open');"><i class="material-icons">delete_forever</i></a>
                            </div>
                            <input placeholder="Buscar por nombre o codigo" id="first_name" type="text" class="right" width="100">
                        </div>
                    </div>
                </div>
                <div class="articulos-orden"></div>
                <div class="col l12 center" id="pre-ArticulosOrden" style="padding-top: 100px; display: none;">
                    <div class="preloader-wrapper small active">
                        <div class="spinner-layer spinner-blue-only">
                            <div class="circle-clipper left">
                                <div class="circle"></div>
                            </div><div class="gap-patch">
                                <div class="circle"></div>
                            </div><div class="circle-clipper right">
                                <div class="circle"></div>
                            </div>
                        </div>
                    </div>
                    <p style="margin-top:0">Cargando articulos de la orden..</p>
                </div>
            </div>
        </div>
        <div class="detalle col l3">
            <div class="row white z-depth-1">
                <div class="col l12">
                    <p class="title"><strong>Detalle de la Compra</strong></p>
                </div>
                <div class="divider-mio"></div>
                <div class="col l12">
                    <p><strong>Preferencias:</strong></p>
                    <div class="input-field col l12">
                        <input placeholder="" id="N_factura" name="N_factura" type="text">
                        <label for="N_factura">N° Factura</label>
                    </div>
                    @*<div class="input-field col l6">
                            <select id="iva">
                                <option value="5">5%</option>
                                <option value="10">10%</option>
                                <option selected value="15">15%</option>
                            </select>
                            <label>IVA</label>
                        </div>*@
                    <div class="input-field col l12">
                        <select id="comprobante">
                            <option value="Recibo">Recibo</option>
                            <option value="Factura">Factura</option>
                            <option value="Otro">Otro</option>
                        </select>
                        <label>Comprobante</label>
                    </div>
                </div>
                <div class="detalles col l12"></div>
                <div class="acciones col l12 blue center-align">
                    <h5 class="center-align white-text total"></h5>
                    <a class="btn white red-text tooltipped" data-position="top" data-delay="50" data-tooltip="Cancelar Compra" onclick="$('#cancelarCompra').modal('open');"><i class="material-icons">remove_shopping_cart</i></a>
                    <a id="comprar" class="btn white blue-text text-darken-1 tooltipped" data-position="top" data-delay="50" data-tooltip="Realizar Compra" onclick="facturar()"><i class="material-icons">shopping_cart</i></a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal-compras">
    <div id="proveedores" class="modal">
        <div class="proveedores white">
            <div class="row blue z-depth-1">
                <h4 class="white-text left-align">
                    <i class="material-icons">search</i>
                    Buscar Proveedor
                    <i class="salir material-icons right" onclick="CancelProveedor()">clear</i>
                </h4>
            </div>
            <div class="modal-content row white-text">
                <div class="col l12">
                    <div class="option-bar col l8 offset-l2 white z-depth-1 border-radius-2">
                        <form class="col l9">
                            <div class="input-field">
                                <input id="search" type="search" placeholder="Buscar Proveedor" required>
                            </div>
                        </form>
                        <div class="col l3">
                            <a class="hide tooltipped" data-position="bottomMio" data-delay="50" data-tooltip="Vista de cuadricula"><i class="material-icons">view_module</i></a>
                            <a class="tooltipped" data-position="bottomMio" data-delay="50" data-tooltip="Vista de lista"><i class="material-icons">view_list</i></a>
                            <a class="tooltipped" data-position="bottomMio" data-delay="50" data-tooltip="Actualizar"><i class="material-icons">refresh</i></a>
                            <a class="tooltipped dropdown-button" href="#!" data-activates="dropdown1" data-position="bottomMio" data-delay="50" data-tooltip="Opciones">
                                <i class="material-icons right">more_vert</i>
                            </a>
                            <!-- Dropdown Structure -->
                            <ul id='dropdown1' class='dropdown-content'>
                                <li><a href="#!">one</a></li>
                                <li><a href="#!">two</a></li>
                            </ul>

                        </div>
                    </div>
                </div>
                <div class="lista-proveedores"></div>
                <div class="col l12 center" id="pre-Proveedores" style="padding-top: 30px; padding-bottom: 20px; display: none;">
                    <div class="preloader-wrapper small active">
                        <div class="spinner-layer spinner-white-only">
                            <div class="circle-clipper left">
                                <div class="circle"></div>
                            </div><div class="gap-patch">
                                <div class="circle"></div>
                            </div><div class="circle-clipper right">
                                <div class="circle"></div>
                            </div>
                        </div>
                    </div>
                    <p class="white-text" style="margin-top:0">Cargando lista de articulos..</p>
                </div>
            </div>
        </div>
    </div>
    <div id="nuevoProveedor" class="modal modal-small">
        <div class="nuevoProveedor white">
            <div class="row blue z-depth-1">
                <h4 class="white-text left-align">
                    <i class="material-icons">search</i>
                    Agregar Proveedor
                    <i class="salir material-icons right" onclick="$('#nuevoProveedor').modal('close');">clear</i>
                </h4>
            </div>
            <div class="modal-content row grey-text text-darken-4">
                <div class="col l3">
                    <img src="~/Content/system-resources/proveedor-Default.png" class="responsive-img" />
                </div>
                <div class="col l9">
                    <div class="input-field col l12">
                        <input placeholder="" autofocus="autofocus" id="nombre-p" name="nombre-p" type="text">
                        <label for="nombre-p">Nombre</label>
                    </div>
                    <div class="input-field col l6">
                        <input id="telefono-p" name="telefono-p" type="text">
                        <label for="telefono-p">Telefono</label>
                    </div>
                    <div class="input-field col l6">
                        <input id="ruc-p" name="ruc-p" type="text" class="validate">
                        <label for="ruc-p">N° Ruc</label>
                    </div>
                    <div class="col l12 right-align">
                        <br />
                        <button class="btn btn-flat white purple-text" type="button" onclick="CancelNuevoProveedor()">Cancelar</button>
                        <button class="btn btn-flat white blue-text" type="button" onclick="agregarProveedorTmp()">Agregar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="editarProveedor" class="modal modal-small">
        <div class="editarProveedor white">
            <div class="row blue z-depth-1">
                <h4 class="white-text left-align">
                    <i class="material-icons">search</i>
                    Editar Proveedor
                    <i class="salir material-icons right" onclick="$('#editarProveedor').modal('close');">clear</i>
                </h4>
            </div>
            <div class="modal-content row white-text">
                <div class="col l3">
                    <img src="~/Content/system-resources/proveedor-Default.png" class="responsive-img" />
                </div>
                <div class="col l9">
                    <div class="input-field col l12">
                        <input placeholder="" id="nombre-p" name="nombre-p" type="text">
                        <label for="nombre-p">Nombre</label>
                    </div>
                    <div class="input-field col l6">
                        <input id="telefono-p" name="telefono-p" type="text">
                        <label for="telefono-p">Telefono</label>
                    </div>
                    <div class="input-field col l6">
                        <input id="ruc-p" name="ruc-p" type="text" class="validate">
                        <label for="ruc-p">N° Ruc</label>
                    </div>
                    <div class="input-field col l6 hide">
                        <input id="id-p" name="id-p" type="text" class="validate">
                    </div>
                    <div class="col l12 right-align">
                        <br />
                        <button class="btn btn-flat white purple-text" type="button" onclick="CancelEditarProveedor()">Cancelar</button>
                        <button class="btn btn-flat white blue-text" type="button" onclick="editarGuardarProveedor()">Agregar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="articulos" class="modal modal-giant">
        <div class="articulos white">
            <div class="row blue z-depth-1">
                <h4 class="white-text left-align">
                    <i class="material-icons">search</i>
                    Buscar Articulo
                    <i class="salir material-icons right" onclick="CancelArticulos()">clear</i>
                </h4>
            </div>
            <div class="modal-content row">
                <div class="col l12">
                    <div class="option-bar col l6 offset-l3 white z-depth-1 border-radius-2">
                        <form class="col l9">
                            <div class="input-field">
                                <input id="search" type="search" placeholder="Buscar Articulo" required>
                            </div>
                        </form>
                        <div class="acciones col l3">
                            <a class="tooltipped card-v" data-position="bottomMio" data-delay="50" data-tooltip="Vista de cuadricula" onclick="articulos(0)"><i class="material-icons">view_module</i></a>
                            <a class="tooltipped table-v" data-position="bottomMio" data-delay="50" data-tooltip="Vista de lista" onclick="articulos(1)"><i class="material-icons">view_list</i></a>
                            <a class="tooltipped" data-position="bottomMio" data-delay="50" data-tooltip="Actualizar"><i class="material-icons">refresh</i></a>
                            <a class="tooltipped dropdown-button" href="#!" data-activates="dropdown1" data-position="bottomMio" data-delay="50" data-tooltip="Opciones">
                                <i class="material-icons right">more_vert</i>
                            </a>
                            <!-- Dropdown Structure -->
                            <ul id='dropdown1' class='dropdown-content'>
                                <li><a href="#!">one</a></li>
                                <li><a href="#!">two</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="lista-articulos"></div>
                <div class="col l12 center" id="pre-Articulos" style="padding-top: 30px; padding-bottom: 20px; display: none;">
                    <div class="preloader-wrapper small active">
                        <div class="spinner-layer spinner-blue-only">
                            <div class="circle-clipper left">
                                <div class="circle"></div>
                            </div><div class="gap-patch">
                                <div class="circle"></div>
                            </div><div class="circle-clipper right">
                                <div class="circle"></div>
                            </div>
                        </div>
                    </div>
                    <p class="white-text" style="margin-top:0">Cargando lista de articulos..</p>
                </div>
            </div>
        </div>
    </div>
    <div id="eliminartodos" class="modal modal-mini">
        <div class="eliminartodos white">
            <div class="row blue z-depth-1">
                <h4 class="white-text left-align">
                    <i class="material-icons">delete_forever</i>
                    Vaciar orden
                    <i class="salir modal-close material-icons right">clear</i>
                </h4>
            </div>
            <div class="modal-content">
                <p class="grey-text text-darken-4">Esta seguro que desea eliminar todos los articulos agregados en la orden?</p>
                <div class="col l12 right-align">
                    <a class="modal-action modal-close waves-effect waves-light  btn-flat white purple-text">Cancelar</a>
                    <a class="modal-action modal-close waves-effect waves-light btn-flat white blue-text" onclick="eliminarProductosTodos()">Aceptar</a>
                </div>
            </div>
        </div>
    </div>
    <div id="cancelarCompra" class="modal modal-mini">
        <div class="cancelarCompra white">
            <div class="row blue z-depth-1">
                <h4 class="white-text left-align">
                    <i class="material-icons">cancel</i>
                    Cancelar Compra
                    <i class="salir modal-close material-icons right">clear</i>
                </h4>
            </div>
            <div class="modal-content">
                <p class="grey-text text-darken-4">Esta seguro que desea cancelar la compra?</p>
                <div class="col l12 right-align">
                    <a class="modal-action modal-close waves-effect waves-light  btn-flat white purple-text">Cancelar</a>
                    <a class="modal-action waves-effect waves-light btn-flat white blue-text" onclick="cancelarCompra()">Aceptar</a>
                </div>
            </div>
        </div>
    </div>
    <div id="nuevoProducto" class="modal white">
        <div class="articulo-nuevo white">
            <div class="row blue z-depth-1">
                <h4 class="white-text left-align">
                    <i class="material-icons">add_box</i>Agregar Nuevo Articulo
                    <i class="material-icons modal-close right">clear</i>
                </h4>
            </div>
            <div class="modal-content row grey-text text-darken-3">
                <div class="col l4">
                    <div class="col l12">
                        <form action="~/Utilities/SaveUploadedFile/0" method="post" enctype="multipart/form-data" class="dropzone" id="my-dropzone" style="width: 50px; background: none; border: none;">
                            <div class="fallback">
                                <input name="file" type="file" multiple />
                                <input type="submit" value="Upload" />
                            </div>
                        </form>
                    </div>
                </div>
                    <div class="col l8">
                        <div class="input-field col l3">
                            <input name="codigo_articulo" id="codigo_articulo" class="validate" type="text" autofocus  disabled/>
                            <label for="codigo_articulo">Codigo</label>
                        </div>
                        <div class="input-field col l9">
                            <input name="nombre_articulo" id="nombre_articulo" class="validate" type="text" autofocus />
                            <label for="nombre_articulo">Nombre</label>
                        </div>
                        <div class="input-field col l6">
                            @Html.DropDownList("id_marca", null, "Seleccione Marca", htmlAttributes: new { @class = "form-control" })
                            <label>Marca</label>
                        </div>
                        <div class="input-field col l6">
                            @Html.DropDownList("id_categoria", null, "Seleccione Categoria", htmlAttributes: new { @class = "form-control" })
                            <label>Categoria</label>
                        </div>
                        <div class="input-field col l8">
                            <input name="descripcion_articulo" id="descripcion_articulo" class="validate" type="text" />
                            <label for="descripcion_articulo">Descripcion</label>
                        </div>
                        <div class="input-field col l2">
                            <input name="GarantiaCant" id="GarantiaCant" class="validate" type="text" />
                            <label for="Garantia">Garantia</label>
                        </div>
                        <div class="input-field col l2">
                            <select id="GarantiaMedida" name="GarantiaMedida">
                                <option value="1">Dias</option>
                                <option value="2">Meses</option>
                                <option value="3">Años</option>
                            </select>
                        </div>
                        <br />
                    </div>
                    <div id="" class="col l12 especificaciones"></div>
                    <div class="col l12 right-align">
                        <br />
                        <div class="col l12">
                            <button class="modal-close btn btn-flat white purple-text" type="reset">Cancelar</button>
                            <button class="btn btn-flat white blue-text modal-close" id="nuevopro" onclick="nuevopro();">Guardar</button>
                        </div>
                    </div>
            </div>
        </div>
    </div>
</div>
@section Styles{
    @Styles.Render("~/Content/dropzone")
}
@section Scripts{
    @Scripts.Render("~/bundles/dropzone")
    @Scripts.Render("~/bundles/nuevacompra")
}